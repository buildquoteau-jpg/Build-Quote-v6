BuildQuote — React App File Structure & Spec
Version 1.0 · Southwest WA Builder Tools
SCOPE: This document covers the BuildQuote mini-app only. No Directory, no
supplier portal, no manufacturer features. Just get the RFQ flow shipped end-to-end.
1. Technology Stack
Layer Technology
Framework Next.js 14 (App Router) — React + backend in one codebase
Styling Tailwind CSS — mobile-first utility classes
Database Convex — stores RFQs with reference numbers
AI parsing Anthropic Claude API (claude-sonnet) — reads images, PDFs, text
Email sending Resend — simple API, HTML email + attachments, generous free tier
PDF generation pdf-lib — lightweight, no headless browser needed
CSV generation Plain Node.js — no library needed
File uploads Convex File Storage — temporarily holds uploaded BOM files
Hosting Vercel — free tier, zero-config Next.js deployment
Secrets Vercel environment variables — API keys never in code
2. Full File Structure
buildquote/
├── app/
│   ├── layout.tsx                  # Root layout — fonts, metadata, global styles
│   ├── page.tsx                    # Entry point — redirects straight to /rfq
│   ├── rfq/
│   
└── page.tsx                # Main RFQ flow — manages state across all 4 screens
│   
│   
│       
│       
│       
│       
│       
│       
│       
│           
│
└── api/
├── parse/
│   
└── route.ts            # POST — receives file, calls Claude, returns line items JSON
├── send/
│   
└── route.ts            # POST — builds email + PDF + CSV, sends via Resend
├── pdf/
│   
└── route.ts            # POST — generates PDF, returns binary download
└── csv/
└── route.ts            # POST — generates CSV, returns text file download
├── components/
│   
├── ui/                         # Reusable building blocks
│   
│   
│   
│   
│   
│   
│   
│   
│   
│       
│       
│       
│       
│
│   
│   
│   
│   
│   
│   
│   
│
├── TopBar.tsx              # Sticky header + step progress pills
├── Card.tsx                # Surface card container
├── Button.tsx              # primary / secondary / success / ghost variants
├── Input.tsx               # Text input with label
├── CheckRow.tsx            # Checkbox row (used in send options)
├── SectionLabel.tsx        # Uppercase orange section heading
└── Toggle.tsx              # Delivery / Pick-up toggle
└── screens/                    # One file per screen
├── UploadScreen.tsx        # Screen 1 — file upload
├── RFQScreen.tsx           # Screen 2 — review & edit line items
├── SendScreen.tsx          # Screen 3 — builder + supplier details + send
└── SuccessScreen.tsx       # Screen 4 — confirmation + downloads
├── lib/
│   
├── types.ts                    # Shared TypeScript interfaces (LineItem, RFQPayload etc)
│   
│   
│   
│   
│
├── parseFile.ts                # Client helper — reads file as base64 or plain text
├── emailTemplate.ts            # Builds the HTML email body string
├── generatePDF.ts              # Builds the PDF buffer using pdf-lib
└── generateCSV.ts              # Builds the CSV string
├── convex/
│   
├── schema.ts                   # Database schema — rfqs table
│   
│   
│
├── rfqs.ts                     # Mutations: saveRFQ / queries: getRFQ
└── _generated/                 # Auto-generated by Convex — do not edit
├── public/
│   
└── logo.svg                    # BuildQuote logo
│
├── .env.local                      # Local secrets — never commit this file
├── .env.example                    # Template showing which keys are needed
├── .gitignore                      # Must include .env.local
├── next.config.js
├── tailwind.config.ts              # Includes BuildQuote colour tokens
├── tsconfig.json
└── package.json
3. Shared Types — lib/types.ts
Every screen and API route uses these same interfaces so nothing gets out of sync.
// One line item in the RFQ table
interface LineItem {
  id: string
  name: string
  sku: string
  productId: string
  desc: string
  uom: string
  qty: string
}
// Builder's own contact details
interface BuilderDetails {
  builderName: string
  company: string
  abn: string
  phone: string
  email: string
}
// Supplier receiving the RFQ
interface SupplierDetails {
  supplierName: string
  supplierEmail: string
  accountNumber: string
}
// The full RFQ — everything needed to generate email + PDF + CSV
interface RFQPayload {
  rfqId: string
  builder: BuilderDetails
  supplier: SupplierDetails
  items: LineItem[]
  delivery: 'delivery' | 'pickup'
  dateRequired: string
  message: string
  sendCopyToSelf: boolean
}
4. Screen Specs
Screen 1 — Upload (UploadScreen.tsx)
Element Detail
Drop zone Drag and drop or tap to browse. Accepts any file type.
File list Shows each uploaded file with name, size, remove button.
Add another list Appears after first file added. Allows multiple uploads.
Continue button Disabled until at least one file uploaded. Calls /api/parse on tap.
Loading state Spinner overlay while Claude is reading the file.
Screen 2 — Review Items (RFQScreen.tsx)
Mobile-first card layout — one card per line item, stacked vertically.
Element Detail
Item cards One card per line item. No horizontal scroll.
Product Name Large editable field at top of each card.
Description Full-width editable field below name.
SKU / Unit / Qty 3-column mini grid at bottom of each card.
Delete button ✕ on each card removes that line item.
Add line item Dashed button at the bottom adds a blank card.
Back / Continue Back → Screen 1. Continue → Screen 3.
Screen 3 — Review & Send (SendScreen.tsx)
Section Fields
Your Details Builder Name, Company Name, ABN/ACN, Phone, Email
Supplier Details Supplier Name, Account Number (if known)
Delivery Toggle: Delivery or Store Pick-up. Date required picker.
Message Textarea + voice-to-text mic button (en-AU).
Send Options Checkbox: Send to Supplier. Checkbox: Send a copy to myself.
Back / Send Back → Screen 2. Send RFQ → calls /api/send.
Screen 4 — Confirmation (SuccessScreen.tsx)
Element Detail
Success message Large , “RFQ Sent!”, short confirmation text.
RFQ Reference Unique ID e.g. RFQ-2026-4821. Stored in Convex.
Download PDF Button — calls /api/pdf, downloads RFQ-2026-XXXX.pdf
Download CSV Button — calls /api/csv, downloads RFQ-2026-XXXX.csv
Start New RFQ Resets everything back to Screen 1.
5. API Routes
POST /api/parse/route.ts
Receives the uploaded file, calls Claude, returns structured line items.
INPUT:   multipart/form-data — the raw file
PROCESS: Read file as base64 (images/PDFs) or plain text (docs/CSV)
         Send to Claude with structured extraction prompt
         Extract JSON array from response
OUTPUT:  LineItem[] — array of parsed line items
ERRORS:  Returns empty array if nothing found. Returns 500 if API fails.
SECRET:  ANTHROPIC_API_KEY — stored in environment variables only
POST /api/send/route.ts
Receives the full RFQ payload, generates all three deliverables, sends the email.
INPUT:   RFQPayload — all form fields + line items array
PROCESS: 1. Build HTML email body using emailTemplate.ts
         2. Generate PDF buffer using generatePDF.ts
         3. Generate CSV string using generateCSV.ts
         4. Send email via Resend with PDF + CSV as attachments
         5. If sendCopyToSelf = true, CC the builder's email
         6. Save RFQ to Convex database
OUTPUT:  { success: true, rfqId: 'RFQ-2026-XXXX' }
SECRET:  RESEND_API_KEY — stored in environment variables only
POST /api/pdf/route.ts
Generates a print-ready branded PDF.
INPUT:   RFQPayload
LIBRARY: pdf-lib
CONTENTS:
  - BuildQuote branded header
  - Builder details
  - Supplier details + account number
  - Delivery preference + date required
  - Full line items table (all columns)
  - Custom message
  - RFQ reference number + date sent
  - Footer: "Sent via BuildQuote"
OUTPUT:  Binary PDF — Content-Disposition: attachment; filename="RFQ-2026-XXXX.pdf"
POST /api/csv/route.ts
Generates a plain CSV of the line items — importable into Excel or supplier quoting
software.
INPUT:   { items: LineItem[], rfqId: string }
LIBRARY: None — plain Node.js string building
COLUMNS: Product Name, SKU, Product ID, Description/Specs, Unit of Measure, Quantity
OUTPUT:  Text CSV — Content-Disposition: attachment; filename="RFQ-2026-XXXX.csv"
6. Email Format — lib/emailTemplate.ts
The supplier gets one email with everything in it.
Email structure
TO:      supplier email address
FROM:    rfq@buildquote.com.au
REPLY-TO: builder's email (so supplier just hits Reply)
CC:      builder's email (if sendCopyToSelf = true)
SUBJECT: RFQ from [Builder Name] — [Company] — [RFQ Reference]
HTML BODY:
┌─────────────────────────────────────┐
│  BuildQuote logo + header           
│
├─────────────────────────────────────┤
│  Builder details                    
│
│  Name, Company, ABN, Phone, Email   
│
├─────────────────────────────────────┤
│  Supplier details                   
│
│  Account number (if provided)       
│
├─────────────────────────────────────┤
│  Delivery: [Delivery / Pick-up]     
│
│  Date Required: [date]              
│
├─────────────────────────────────────┤
│  LINE ITEMS TABLE                   
│
│  # | Product | SKU | UOM | Qty      
│
│  1 | H2 Framing Timber 190x35 ...  │
│  2 | H2 Framing Timber 170x35 ...  │
│  3 | H2 Framing Timber 170x35 ...  │
├─────────────────────────────────────┤
│  Message from builder               
│
├─────────────────────────────────────┤
│  RFQ Reference: RFQ-2026-XXXX      
│
│  Sent: 23 Feb 2026                  
│
├─────────────────────────────────────┤
│  This RFQ was sent via BuildQuote   
│
└─────────────────────────────────────┘
ATTACHMENTS:
 RFQ-2026-XXXX.pdf   — print-ready branded PDF
 RFQ-2026-XXXX.csv   — importable line items
7. Environment Variables — .env.local
# Anthropic — AI file parsing
ANTHROPIC_API_KEY=sk-ant-...
# Resend — email sending
RESEND_API_KEY=re_...
RESEND_FROM_EMAIL=rfq@buildquote.com.au
# Convex — database
NEXT_PUBLIC_CONVEX_URL=https://...convex.cloud
# App
NEXT_PUBLIC_APP_URL=https://buildquote.com.au
RULE: These keys must never appear in front-end code and must never be
committed to GitHub. Add .env.local to .gitignore before your very first commit.
8. Build Order
Build in this exact order — you always have something that runs.
Step What to build Done when…
1 npx create-next-app@latest
buildquote
App runs at localhost:3000
2 Install Tailwind CSS Dark background and styles work
3 Build UI components (TopBar, Card,
Button, Input) Reusable pieces ready
4 Build all 4 screen components with
hardcoded dummy data Can click through all 4 screens
5 Build /api/parse + connect to Claude API Real file upload returns real line
items
6 Wire UploadScreen to /api/parse Full Screen 1 → Screen 2 flow
works
7 Build emailTemplate.ts Can preview HTML email in
browser
8 Build generatePDF.ts PDF downloads with correct RFQ
data
9 Build generateCSV.ts CSV downloads with correct
columns
10 Build /api/send + connect to Resend RFQ email actually lands in a real
inbox
11 Add PDF + CSV download buttons to
Screen 4
Builder can download both after
sending
12 Set up Convex schema + save RFQ on send RFQs stored in database with
reference number
13 Deploy to Vercel + add environment
variables App live at buildquote.com.au
14 Test end-to-end with a real photo + real
email address
Full flow confirmed worki# Build-Quote-v6
Build Quote - Construction Materials Quoting Platform
